<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>30&nbsp;拼图画布类</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">&#29992;Racket&#20570;&#19968;&#20010;&#25340;&#22270;&#28216;&#25103;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="foreword.html" class="tocviewlink" data-pltdoc="x">&#21069;&#35328;</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="goal.html" class="tocviewlink" data-pltdoc="x">&#35774;&#35745;&#30446;&#26631;</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="idea.html" class="tocviewlink" data-pltdoc="x">&#35774;&#35745;&#24605;&#36335;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="tool.html" class="tocviewlink" data-pltdoc="x">&#23454;&#29616;&#24037;&#20855;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="get-source-picture.html" class="tocviewlink" data-pltdoc="x">&#21462;&#24471;&#28304;&#22270;&#29255;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="set-picture-size.html" class="tocviewlink" data-pltdoc="x">&#35774;&#32622;&#22270;&#29255;&#23610;&#23544;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="adjust-picture-size.html" class="tocviewlink" data-pltdoc="x">&#35843;&#25972;&#26174;&#31034;&#22270;&#29255;&#22823;&#23567;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="split-picture-by-row-col.html" class="tocviewlink" data-pltdoc="x">&#25353;&#34892;&#21015;&#20998;&#21106;&#22270;&#29255;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="make-cell.html" class="tocviewlink" data-pltdoc="x">&#29983;&#25104;&#21333;&#20803;&#26684;&#25968;&#25454;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="split-picture-to-cell-list.html" class="tocviewlink" data-pltdoc="x">&#20998;&#21106;&#22270;&#29255;&#21040;&#21333;&#20803;&#26684;&#21015;&#34920;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="cell-list-to-hash.html" class="tocviewlink" data-pltdoc="x">&#23558;&#21333;&#20803;&#26684;&#21015;&#34920;&#36716;&#25442;&#20026;&#25955;&#21015;&#34920;</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="blend-cells.html" class="tocviewlink" data-pltdoc="x">&#28151;&#21512;&#21333;&#20803;&#26684;</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="model_draw-cells-to-picture.html" class="tocviewlink" data-pltdoc="x">&#32472;&#21046;&#21333;&#20803;&#26684;&#34920;&#20026;&#22270;&#29255;</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="model_use-id.html" class="tocviewlink" data-pltdoc="x">&#25805;&#20316;id</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="model_init-puzzle-data.html" class="tocviewlink" data-pltdoc="x">&#21021;&#22987;&#21270;&#25340;&#22270;&#25968;&#25454;</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="model_recover-puzzle.html" class="tocviewlink" data-pltdoc="x">&#24674;&#22797;&#25340;&#22270;&#21021;&#22987;&#29366;&#24577;</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="model_success.html" class="tocviewlink" data-pltdoc="x">&#21028;&#26029;&#26159;&#21542;&#25104;&#21151;&#23436;&#25104;&#25340;&#22270;</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="model_provide.html" class="tocviewlink" data-pltdoc="x">&#27719;&#24635;&#25552;&#20379;&#26631;&#35782;</a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="gui_create-frame.html" class="tocviewlink" data-pltdoc="x">&#23450;&#20041;&#20027;&#35270;&#22270;&#26694;&#26550;</a></td></tr><tr><td align="right">20&nbsp;</td><td><a href="view_design-layout.html" class="tocviewlink" data-pltdoc="x">&#35268;&#21010;&#24067;&#23616;</a></td></tr><tr><td align="right">21&nbsp;</td><td><a href="gui_create-main-frame.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#20027;&#31383;&#21475;</a></td></tr><tr><td align="right">22&nbsp;</td><td><a href="layout_create-layout.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#31383;&#21475;&#24067;&#23616;</a></td></tr><tr><td align="right">23&nbsp;</td><td><a href="gui_create-left-layout.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#24038;&#20391;&#24067;&#23616;</a></td></tr><tr><td align="right">24&nbsp;</td><td><a href="view_create-command-area.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#21629;&#20196;&#21151;&#33021;&#21306;</a></td></tr><tr><td align="right">25&nbsp;</td><td><a href="gui_create-row-col-set-group.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#34892;&#21015;&#35774;&#32622;&#32452;</a></td></tr><tr><td align="right">26&nbsp;</td><td><a href="gui_create-puzzle-command-button-group.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#25340;&#22270;&#21629;&#20196;&#25353;&#38062;&#32452;</a></td></tr><tr><td align="right">27&nbsp;</td><td><a href="gui_create-status-area.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#29366;&#24577;&#26174;&#31034;&#21306;</a></td></tr><tr><td align="right">28&nbsp;</td><td><a href="gui_create-right-layout.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#21491;&#20391;&#24067;&#23616;</a></td></tr><tr><td align="right">29&nbsp;</td><td><a href="controler_main-frame-controler.html" class="tocviewlink" data-pltdoc="x">&#20027;&#26694;&#26550;&#35270;&#22270;&#25511;&#21046;&#22120;</a></td></tr><tr><td align="right">30&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#25340;&#22270;&#30011;&#24067;&#31867;</a></td></tr><tr><td align="right">31&nbsp;</td><td><a href="puzzle-main.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#20027;&#31243;&#24207;</a></td></tr><tr><td align="right">32&nbsp;</td><td><a href="create-executable.html" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#21487;&#25191;&#34892;&#31243;&#24207;</a></td></tr><tr><td align="right">33&nbsp;</td><td><a href="knowledge-points.html" class="tocviewlink" data-pltdoc="x">&#30693;&#35782;&#28857;</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>30&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#25340;&#22270;&#30011;&#24067;&#31867;</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">30.1&nbsp;</td><td><a href="#%28part._puzzle-canvas-class%2Fdesign-canvas-class%29" class="tocviewlink" data-pltdoc="x">&#36827;&#19968;&#27493;&#35268;&#21010;&#25340;&#22270;&#30011;&#24067;&#31867;</a></td></tr><tr><td align="right">30.2&nbsp;</td><td><a href="#%28part._puzzle-canvas-class%2Ffield%29" class="tocviewlink" data-pltdoc="x">&#23383;&#27573;</a></td></tr><tr><td align="right">30.3&nbsp;</td><td><a href="#%28part._puzzle-canvas-class%2Fmethod%29" class="tocviewlink" data-pltdoc="x">&#26041;&#27861;</a></td></tr><tr><td align="right">30.4&nbsp;</td><td><a href="#%28part._puzzle-canvas-class%2Fmouse-move-not-drag%29" class="tocviewlink" data-pltdoc="x">&#40736;&#26631;&#31227;&#21160;&#20294;&#19981;&#25302;&#25341;</a></td></tr><tr><td align="right">30.5&nbsp;</td><td><a href="#%28part._puzzle-canvas-class%2Fmouse-move-and-drag%29" class="tocviewlink" data-pltdoc="x">&#40736;&#26631;&#31227;&#21160;&#24182;&#25302;&#25341;</a></td></tr><tr><td align="right">30.6&nbsp;</td><td><a href="#%28part._puzzle-canvas-class%2Frelease-mouse-left-key%29" class="tocviewlink" data-pltdoc="x">&#37322;&#25918;&#40736;&#26631;&#24038;&#38190;</a></td></tr><tr><td align="right">30.7&nbsp;</td><td><a href="#%28part._puzzle-canvas-class%2Fprovide-class%29" class="tocviewlink" data-pltdoc="x">&#31867;&#25552;&#20379;&#35774;&#32622;</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">30.1<tt>&nbsp;</tt></span><a href="#%28part._puzzle-canvas-class%2Fdesign-canvas-class%29" class="tocsubseclink" data-pltdoc="x">&#36827;&#19968;&#27493;&#35268;&#21010;&#25340;&#22270;&#30011;&#24067;&#31867;</a></td></tr><tr><td><span class="tocsublinknumber">30.2<tt>&nbsp;</tt></span><a href="#%28part._puzzle-canvas-class%2Ffield%29" class="tocsubseclink" data-pltdoc="x">&#23383;&#27573;</a></td></tr><tr><td><span class="tocsublinknumber">30.3<tt>&nbsp;</tt></span><a href="#%28part._puzzle-canvas-class%2Fmethod%29" class="tocsubseclink" data-pltdoc="x">&#26041;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">30.4<tt>&nbsp;</tt></span><a href="#%28part._puzzle-canvas-class%2Fmouse-move-not-drag%29" class="tocsubseclink" data-pltdoc="x">&#40736;&#26631;&#31227;&#21160;&#20294;&#19981;&#25302;&#25341;</a></td></tr><tr><td><span class="tocsublinknumber">30.5<tt>&nbsp;</tt></span><a href="#%28part._puzzle-canvas-class%2Fmouse-move-and-drag%29" class="tocsubseclink" data-pltdoc="x">&#40736;&#26631;&#31227;&#21160;&#24182;&#25302;&#25341;</a></td></tr><tr><td><span class="tocsublinknumber">30.6<tt>&nbsp;</tt></span><a href="#%28part._puzzle-canvas-class%2Frelease-mouse-left-key%29" class="tocsubseclink" data-pltdoc="x">&#37322;&#25918;&#40736;&#26631;&#24038;&#38190;</a></td></tr><tr><td><span class="tocsublinknumber">30.7<tt>&nbsp;</tt></span><a href="#%28part._puzzle-canvas-class%2Fprovide-class%29" class="tocsubseclink" data-pltdoc="x">&#31867;&#25552;&#20379;&#35774;&#32622;</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.9</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="controler_main-frame-controler.html" title="backward to &quot;29 主框架视图控制器&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;用Racket做一个拼图游戏&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="puzzle-main.html" title="forward to &quot;31 创建主程序&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>30<tt>&nbsp;</tt><a name="(part._controler/puzzle-canvas-class)"></a>&#25340;&#22270;&#30011;&#24067;&#31867;</h3><p>&#25340;&#22270;&#30011;&#24067;&#31867;&#65288;puzzle-canvas%&#65289;&#22312;&#20043;&#21069;&#20570;&#36807;&#31616;&#21333;&#20171;&#32461;&#65292;&#20063;&#21019;&#24314;&#20986;&#22522;&#26412;&#26694;&#26550;&#65292;&#25509;&#19979;&#26469;&#23545;&#20854;&#36827;&#34892;&#25193;&#23637;&#12290;</p><h4>30.1<tt>&nbsp;</tt><a name="(part._puzzle-canvas-class/design-canvas-class)"></a>&#36827;&#19968;&#27493;&#35268;&#21010;&#25340;&#22270;&#30011;&#24067;&#31867;</h4><p>&#25353;&#20043;&#21069;&#25551;&#36848;&#30340;&#31867;&#35774;&#35745;&#30340;&#24605;&#36335;&#65292;&#20998;&#26512;&#19968;&#19979;&#25340;&#22270;&#30011;&#24067;&#31867;&#35201;&#20570;&#30340;&#24037;&#20316;&#12290;</p><p>&#25340;&#22270;&#31243;&#24207;&#30340;&#37325;&#22836;&#25103;&#26159;&#32473;&#32473;&#29992;&#25143;&#30340;&#65292;&#25152;&#26377;&#20043;&#21069;&#23436;&#25104;&#30340;&#32534;&#31243;&#24037;&#20316;&#37117;&#26159;&#20026;&#20102;&#35753;&#29992;&#25143;&#33021;&#22815;&#31616;&#21333;&#22320;&#29992;&#19968;&#20010;&#40736;&#26631;&#65292;&#36890;&#36807;&#25302;&#21160;&#22270;&#29255;&#21333;&#20803;&#26684;&#23558;&#22270;&#29255;&#22797;&#21407;&#12290;&#22240;&#27492;&#26368;&#37325;&#35201;&#30340;&#20107;&#24773;&#26159;&#22788;&#29702;&#40736;&#26631;&#20107;&#20214;&#12290;&#24402;&#32435;&#19968;&#19979;&#65292;&#40736;&#26631;&#20107;&#20214;&#24212;&#35813;&#22788;&#29702;&#20197;&#19979;&#20107;&#24773;&#65306;</p><ul><li><p>&#40736;&#26631;&#22312;&#25340;&#22270;&#19978;&#31227;&#21160;&#65292;&#27599;&#31227;&#21160;&#21040;&#19968;&#20010;&#21333;&#20803;&#26684;&#19978;&#25110;&#31227;&#20986;&#19968;&#20010;&#21333;&#20803;&#26684;&#65292;&#30011;&#24067;&#19978;&#24212;&#35813;&#26377;&#19968;&#20010;&#35270;&#35273;&#25552;&#31034;&#65307;</p></li><li><p>&#40736;&#26631;&#25302;&#30528;&#19968;&#20010;&#21333;&#20803;&#26684;&#22270;&#29255;&#21040;&#21478;&#19968;&#20010;&#21333;&#20803;&#26684;&#65292;&#22312;&#36807;&#31243;&#20013;&#24212;&#35813;&#26174;&#31034;&#25302;&#20986;&#30340;&#21333;&#20803;&#26684;&#20869;&#30340;&#22270;&#29255;&#27809;&#20102;&#65292;&#22270;&#29255;&#36319;&#30528;&#40736;&#26631;&#25302;&#30528;&#36208;&#65307;</p></li><li><p>&#40736;&#26631;&#25302;&#30528;&#21333;&#20803;&#26684;&#22270;&#29255;&#21040;&#20102;&#21478;&#19968;&#20010;&#21333;&#20803;&#26684;&#19978;&#25918;&#19979;&#65292;&#31243;&#24207;&#33258;&#21160;&#23436;&#25104;&#22270;&#29255;&#35843;&#25442;&#30340;&#29366;&#24577;&#12290;</p></li><li><p>&#29992;&#25143;&#19981;&#26029;&#37325;&#22797;&#65292;&#30452;&#21040;&#25340;&#22270;&#23436;&#25104;&#20026;&#27490;&#12290;</p></li></ul><p><div class="SIntrapara">&#36825;&#37324;&#26377;&#20004;&#20010;&#38382;&#39064;&#65306;
</div><div class="SIntrapara"><ol><li><p>&#25340;&#22270;&#23436;&#25104;&#20102;&#65292;&#24590;&#20040;&#32467;&#26463;&#21602;&#65311;</p><p>&#38656;&#35201;&#32473;&#31867;&#19968;&#20010;&#26631;&#24535;&#26469;&#25351;&#26126;&#25340;&#22270;&#23436;&#25104;&#20102;&#65292;&#22914;&#26524;&#36825;&#20010;&#26631;&#24535;&#20026;#t&#65292;&#26631;&#35782;&#25340;&#22270;&#23436;&#25104;&#65292;&#31243;&#24207;&#19981;&#20877;&#21709;&#24212;&#25302;&#21160;&#21333;&#20803;&#26684;&#22270;&#29255;&#12290;</p></li><li><p>&#21516;&#26679;&#26159;&#40736;&#26631;&#21010;&#36807;&#22270;&#29255;&#65292;&#24590;&#20040;&#21306;&#20998;&#26159;&#21542;&#22788;&#20110;&#25302;&#21160;&#29366;&#24577;&#21602;&#65311;</p><p>&#21516;&#26679;&#35774;&#32622;&#19968;&#20010;&#26631;&#24535;&#26469;&#23436;&#25104;&#65292;&#22914;&#26524;&#36825;&#20010;&#26631;&#24535;&#20026;#t&#65292;&#26631;&#35782;&#22312;&#25302;&#21160;&#22270;&#29255;&#12290;</p></li></ol></div></p><p>&#26681;&#25454;&#20197;&#19978;&#20998;&#26512;&#65292;&#23601;&#21487;&#20197;&#22522;&#26412;&#30830;&#23450;&#25340;&#22270;&#30011;&#24067;&#31867;&#30340;&#20869;&#23481;&#20102;&#65306;&#24212;&#35813;&#26377;2&#20010;&#23383;&#27573;&#20540;&#65292;&#25226;&#23427;&#20204;&#34920;&#31034;&#20026;<span class="RktVar">dragging</span>&#65288;&#34920;&#31034;&#25302;&#21160;&#29366;&#24577;&#65289;&#21644;<span class="RktVar">over</span>&#65288;&#34920;&#31034;&#28216;&#25103;&#32467;&#26463;&#65289;&#12290;&#25226;&#22788;&#29702;&#40736;&#26631;&#20107;&#20214;&#30340;3&#31181;&#34892;&#20026;&#25972;&#29702;&#25104;&#31867;&#26041;&#27861;&#65292;&#36825;&#20123;&#26041;&#27861;&#21482;&#32473;&#40736;&#26631;&#20107;&#20214;&#29992;&#65292;&#22240;&#27492;&#37319;&#29992;<span class="RktSym">private</span>&#31867;&#22411;&#12290;</p><h4>30.2<tt>&nbsp;</tt><a name="(part._puzzle-canvas-class/field)"></a>&#23383;&#27573;</h4><p>&#30001;&#19978;&#25152;&#36848;&#65292;&#23450;&#20041;&#31867;&#23383;&#27573;&#22914;&#19979;&#65306;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;&#31867;&#23383;&#27573;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">field</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">dragging</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktCmt">;&#21333;&#20803;&#26684;&#25302;&#21160;&#29366;&#24577;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">over</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt">;&#28216;&#25103;&#32467;&#26463;&#26631;&#24535;</span><span class="RktMeta"></span></td></tr></table></blockquote><p>&#36825;&#37324;&#23450;&#20041;&#30340;&#23383;&#27573;&#25918;&#22312;<span class="RktPn">(</span><span class="RktSym">super-new</span><span class="RktPn">)</span>&#30340;&#21069;&#38754;&#25110;&#21518;&#38754;&#37117;&#26159;&#21487;&#20197;&#30340;&#12290;</p><h4>30.3<tt>&nbsp;</tt><a name="(part._puzzle-canvas-class/method)"></a>&#26041;&#27861;</h4><p>&#21516;&#26679;&#22914;&#19978;&#25152;&#36848;&#65292;&#23450;&#20041;&#40736;&#26631;&#20107;&#20214;&#22788;&#29702;&#26041;&#27861;&#22914;&#19979;&#65306;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;&#35206;&#30422;&#23450;&#20041;&#40736;&#26631;&#20107;&#20214;&#26041;&#27861;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">define/override</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">on-event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#22914;&#26524;&#28216;&#25103;&#32467;&#26463;&#65292;&#19981;&#20877;&#22788;&#29702;&#40736;&#26631;&#20107;&#20214;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">unless</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">over</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">dc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">get-dc</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">send</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">get-x</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">send</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">get-y</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">msg-mouse-pos</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktCmt">;&#26174;&#31034;&#40736;&#26631;&#20301;&#32622;&#20449;&#24687;&#12290;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#26681;&#25454;&#20107;&#20214;&#24773;&#20917;&#36827;&#34892;&#21160;&#24577;&#26174;&#31034;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cond</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#31227;&#21160;&#20294;&#19981;&#25302;&#25341;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">send</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">moving?</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">not</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">send</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dragging?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">flag-cell-and-set-current</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#25302;&#25341;&#24182;&#31227;&#21160;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">send</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">moving?</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">send</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dragging?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">move-cell-and-simulate-swap</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#37322;&#25918;&#40736;&#26631;&#24038;&#38190;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">send</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">event</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">button-up?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dragging</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">swap-cell-current-to-target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">else</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">void</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>&#36825;&#37324;&#39034;&#20415;&#29992;&#35270;&#22270;&#25511;&#21046;&#27169;&#22359;&#23450;&#20041;&#30340;<span class="RktSym">msg-mouse-pos</span>&#25226;&#40736;&#26631;&#30340;&#21363;&#26102;&#20301;&#32622;&#26174;&#31034;&#22312;&#29366;&#24577;&#20449;&#24687;&#26694;&#37324;&#12290;</p><p>&#40736;&#26631;&#20107;&#20214;&#26159;&#36890;&#36807;<span class="RktSym">cond</span>&#26469;&#36827;&#34892;&#26681;&#25454;&#21028;&#26029;&#20998;&#25903;&#22788;&#29702;&#30340;&#65292;&#36825;&#20063;&#26159;&#22788;&#29702;&#20107;&#20214;&#30340;&#24120;&#29992;&#25805;&#20316;&#65292;&#22312;GUI&#31243;&#24207;&#37324;&#38750;&#24120;&#24120;&#29992;&#12290;&#20998;&#25903;&#30340;&#21028;&#26029;&#21015;&#20030;&#20102;4&#20013;&#24773;&#20917;&#65306;</p><ol><li><p>&#40736;&#26631;&#31227;&#21160;&#20294;&#19981;&#25302;&#21160;&#65307;</p></li><li><p>&#40736;&#26631;&#31227;&#21160;&#19988;&#25302;&#21160;&#65307;</p></li><li><p>&#37322;&#25918;&#40736;&#26631;&#24038;&#38190;;</p></li><li><p>&#39069;&#22806;&#24773;&#20917;&#12290;</p></li></ol><p>&#20197;&#19978;&#21015;&#20030;&#21644;&#21069;&#38754;&#30340;&#20998;&#26512;&#26159;&#19968;&#19968;&#23545;&#24212;&#30340;&#65292;&#22810;&#20986;&#20102;&#19968;&#20010;&#39069;&#22806;&#24773;&#20917;&#12290;</p><p><span class="RktSym">cond</span>&#30340;&#39069;&#22806;&#24773;&#20917;&#65288;<span class="RktSym">else</span>&#65289;&#26159;&#20026;&#20102;&#34917;&#20805;&#21015;&#20030;&#24773;&#20917;&#20043;&#22806;&#30340;&#25152;&#26377;&#24773;&#20917;&#65292;&#20351;&#24471;<span class="RktSym">cond</span>&#23545;&#38382;&#39064;&#30340;&#25551;&#36848;&#36827;&#34892;&#20840;&#35206;&#30422;&#12290;&#36825;&#37324;&#29992;&#30340;&#26159;<span class="RktVar">void</span>&#65288;&#20160;&#20040;&#20063;&#19981;&#20570;&#65289;&#65292;&#22240;&#27492;&#36825;&#20010;&#39069;&#22806;&#24773;&#20917;&#26159;&#21487;&#20197;&#19981;&#35201;&#30340;&#65292;&#21482;&#26159;&#20026;&#20102;&#23436;&#25972;&#24615;&#20445;&#30041;&#20102;&#19979;&#26469;&#12290;</p><p>&#25509;&#19979;&#26469;&#26469;&#30475;&#19977;&#20010;&#20107;&#20214;&#22788;&#29702;&#36807;&#31243;&#12290;</p><h4>30.4<tt>&nbsp;</tt><a name="(part._puzzle-canvas-class/mouse-move-not-drag)"></a>&#40736;&#26631;&#31227;&#21160;&#20294;&#19981;&#25302;&#25341;</h4><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;&#40736;&#26631;&#31227;&#21160;&#20294;&#19981;&#25302;&#25341;&#65292;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;&#23545;&#40736;&#26631;&#20301;&#32622;&#21333;&#20803;&#26684;&#36827;&#34892;&#26631;&#35760;&#24182;&#35760;&#24405;&#20026;&#24403;&#21069;&#21333;&#20803;&#26684;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">define/private</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">flag-cell-and-set-current</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x&amp;y-&gt;id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">unless</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">get-current-id</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-puzzle-picture</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id/old</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">get-current-id</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-lose-focus-cell</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">has-id?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set-current-id!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-focus-cell</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>&#20351;&#29992;&#30340;&#20989;&#25968;&#37117;&#26159;&#25340;&#22270;&#27169;&#22411;&#27169;&#22359;&#37324;&#30340;&#12290;&#27809;&#21861;&#35299;&#37322;&#30340;&#12290;</p><h4>30.5<tt>&nbsp;</tt><a name="(part._puzzle-canvas-class/mouse-move-and-drag)"></a>&#40736;&#26631;&#31227;&#21160;&#24182;&#25302;&#25341;</h4><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;&#25302;&#25341;&#24182;&#31227;&#21160;&#65292;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;&#31227;&#21160;&#24403;&#21069;&#21333;&#20803;&#26684;&#65292;&#22312;&#36827;&#20837;&#20854;&#23427;&#21333;&#20803;&#26684;&#26102;&#27169;&#25311;&#35843;&#25442;&#22330;&#26223;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">define/private</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">move-cell-and-simulate-swap</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">id/target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">drag-x&amp;y-&gt;id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">get-current-id</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cond</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">has-id?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id/target</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#32472;&#21046;&#20004;&#20010;&#21333;&#20803;&#26684;&#35843;&#25442;&#29366;&#24577;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-puzzle-picture</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-blank-cell</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id/target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-cell-to-id/target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id/target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-cell-to-x&amp;y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">else</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#32472;&#21046;&#24403;&#21069;&#21333;&#20803;&#26684;&#25302;&#21160;&#29366;&#24577;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-puzzle-picture</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-blank-cell</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-cell-to-x&amp;y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#35774;&#32622;&#21333;&#20803;&#26684;&#25302;&#21160;&#29366;&#24577;&#20026;#t&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">unless</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dragging</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dragging</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>&#20351;&#29992;&#30340;&#20989;&#25968;&#37117;&#26159;&#25340;&#22270;&#27169;&#22411;&#27169;&#22359;&#37324;&#30340;&#12290;&#27809;&#21861;&#35299;&#37322;&#30340;&#12290;</p><h4>30.6<tt>&nbsp;</tt><a name="(part._puzzle-canvas-class/release-mouse-left-key)"></a>&#37322;&#25918;&#40736;&#26631;&#24038;&#38190;</h4><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;&#37322;&#25918;&#40736;&#26631;&#24038;&#38190;&#65292;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;&#23558;&#24403;&#21069;&#21333;&#20803;&#26684;&#19982;&#30446;&#26631;&#21333;&#20803;&#26684;&#35843;&#25442;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">define/private</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">swap-cell-current-to-target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">id/target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">drag-x&amp;y-&gt;id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">has-id?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id/target</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">get-current-id</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#23558;&#20004;&#20010;&#21333;&#20803;&#26684;&#35843;&#25442;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">swap-cell</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id/target</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set-puzzle-picture!</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">draw-puzzle-picture</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#26816;&#26597;&#26159;&#21542;&#25104;&#21151;&#25340;&#21512;&#22270;&#29255;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">success?</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">msg-string</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"&#24685;&#21916;&#65281;&#25104;&#21151;&#23436;&#25104;&#25340;&#22270;&#65281;"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">over</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#35774;&#32622;&#21333;&#20803;&#26684;&#25302;&#21160;&#29366;&#24577;&#20026;#f&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dragging</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dragging</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>&#20351;&#29992;&#30340;&#20989;&#25968;&#37117;&#26159;&#25340;&#22270;&#27169;&#22411;&#27169;&#22359;&#37324;&#30340;&#65292;&#27809;&#21861;&#35299;&#37322;&#30340;&#12290;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#36825;&#37324;&#27599;&#27425;&#23436;&#25104;&#21333;&#20803;&#26684;&#35843;&#25442;&#37117;&#35201;&#26816;&#26597;&#19968;&#27425;&#26159;&#21542;&#24050;&#32463;&#23436;&#25104;&#25340;&#22270;&#24182;&#32473;&#20986;&#25552;&#31034;&#21450;&#35774;&#32622;&#32467;&#26463;&#26631;&#24535;&#12290;</p><p>&#36890;&#36807;&#20197;&#19978;&#30340;&#20004;&#20010;&#23383;&#27573;&#21450;&#19977;&#20010;&#22788;&#29702;&#36807;&#31243;&#65292;&#23436;&#25104;&#20102;&#25340;&#22270;&#30011;&#24067;&#30340;&#22270;&#24418;&#20132;&#20114;&#24037;&#20316;&#12290;</p><p>&#36825;&#20010;&#31867;&#20316;&#20026;&#29420;&#31435;&#30340;&#27169;&#22359;&#25991;&#20214;&#36827;&#34892;&#32534;&#36753;&#12290;&#21644;&#20854;&#23427;&#27169;&#22359;&#21516;&#26679;&#65292;&#20026;&#20102;&#35270;&#22270;&#27169;&#22359;&#33021;&#22815;&#20351;&#29992;&#23436;&#25104;&#30340;&#36825;&#20010;&#31867;&#65292;&#38656;&#35201;&#36827;&#34892;&#25552;&#20379;&#35774;&#32622;&#12290;</p><h4>30.7<tt>&nbsp;</tt><a name="(part._puzzle-canvas-class/provide-class)"></a>&#31867;&#25552;&#20379;&#35774;&#32622;</h4><p>&#23436;&#25104;&#31867;&#32534;&#31243;&#21518;&#65292;&#21516;&#26679;&#38656;&#35201;&#36827;&#34892;&#25552;&#20379;&#35774;&#32622;&#65292;&#20197;&#20415;&#25552;&#20379;&#32473;&#20854;&#23427;&#27169;&#22359;&#38656;&#27714;&#20351;&#29992;&#65288;&#36825;&#37324;&#26159;&#25552;&#20379;&#32473;&#35270;&#22270;&#27169;&#22359;&#20351;&#29992;&#65289;&#12290;</p><p>&#39318;&#20808;&#38656;&#35201;&#20102;&#35299;&#30340;&#26159;&#8212;&#8212;&#31867;&#26159;&#20540;&#65292;&#23427;&#20204;&#21487;&#20197;&#36328;&#36234;&#21512;&#32422;&#36793;&#30028;&#12290;&#20351;&#29992; <span class="RktSym">class/c</span> &#34920;&#26500;&#24314;&#31867;&#21512;&#32422;&#65292;&#21487;&#20197;&#29992;&#21512;&#32422;&#20445;&#25252;&#32473;&#23450;&#31867;&#30340;&#19968;&#37096;&#20998;&#12290;</p><p>&#20197;&#19979;&#26159;&#31867;&#21512;&#32422;&#26500;&#24314;&#30340;&#23436;&#25972;&#26041;&#24335;&#65306;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">class/c</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">maybe-opaque</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">member-spec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">maybe-opaque</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktSym">=</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	#:opaque
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">#:opaque</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:ignore-local-member-names</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">member-spec</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktSym">=</span><span class="RktMeta">	</span><span class="RktSym">method-spec</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	(field field-spec ...)
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">(</span><span class="RktSym">init</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">field-spec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	(init-field field-spec ...)
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">(</span><span class="RktSym">inherit</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-spec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	(inherit-field field-spec ...)
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">(</span><span class="RktSym">super</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-spec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	(inner method-spec ...)
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">(</span><span class="RktSym">override</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-spec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	(augment method-spec ...)
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">(</span><span class="RktSym">augride</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-spec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	(absent absent-spec ...)
&#160;
method-spec	 	=	method-id
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">(</span><span class="RktSym">method-id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-contract-expr</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">field-spec</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktSym">=</span><span class="RktMeta">	</span><span class="RktSym">field-id</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">|	 	(field-id contract-expr)
&#160;
absent-spec	 	=	method-id
                |</span><span class="RktMeta">	</span><span class="hspace">&nbsp;</span><span class="RktMeta">	</span><span class="RktPn">(</span><span class="RktSym">field</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">field-id</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><div class="SIntrapara">&#22312; <span class="RktSym">class/c</span> &#34920;&#20013;&#21015;&#20986;&#30340;&#21512;&#32422;&#26377;&#20004;&#22823;&#31867;&#65306;&#22806;&#37096;&#21512;&#32422;&#21644;&#20869;&#37096;&#21512;&#32422;&#12290;
</div><div class="SIntrapara"><ul><li><p>&#24403;&#19968;&#20010;&#23545;&#35937;&#20174;&#19968;&#20010;&#31867;&#20013;&#23454;&#20363;&#21270;&#26102;&#65292;&#25110;&#32773;&#24403;&#26041;&#27861;&#25110;&#23383;&#27573;&#36890;&#36807;&#35813;&#31867;&#30340;&#19968;&#20010;&#23545;&#35937;&#34987;&#35775;&#38382;&#26102;&#65292;&#22806;&#37096;&#21512;&#32422;&#31649;&#29702;&#34892;&#20026;&#12290;</p></li><li><p>&#24403;&#26041;&#27861;&#25110;&#23383;&#27573;&#22312;&#31867;&#30340;&#23618;&#27425;&#32467;&#26500;&#20013;&#34987;&#35775;&#38382;&#26102;&#65292;&#20869;&#37096;&#21512;&#32422;&#31649;&#29702;&#34892;&#20026;&#12290;</p></li></ul></div><div class="SIntrapara">&#36825;&#31181;&#20998;&#31163;&#20801;&#35768;&#20026;&#31867;&#23458;&#25143;&#25552;&#20379;&#26356;&#24378;&#30340;&#21512;&#32422;&#65292;&#20026;&#23376;&#31867;&#25552;&#20379;&#26356;&#24369;&#30340;&#21512;&#32422;&#12290;</div></p><p>&#26041;&#27861;&#21512;&#32422;&#24517;&#39035;&#21253;&#21547;&#19968;&#20010;&#39069;&#22806;&#30340;&#21021;&#22987;&#21442;&#25968;&#65292;&#23427;&#19982;&#26041;&#27861;&#30340;&#38544;&#24335; <span class="RktVar">this</span> &#21442;&#25968;&#30456;&#23545;&#24212;&#12290;&#36825;&#20801;&#35768;&#22312;&#26041;&#27861;&#34987;&#35843;&#29992;&#26102;&#35752;&#35770;&#23545;&#35937;&#30340;&#29366;&#24577;&#30340;&#21512;&#32422;&#12290;&#26367;&#20195;&#30340;&#21512;&#32422;&#34920;&#65292;&#65288;&#20363;&#22914; <span class="RktSym"><span class="nobreak">-&gt;</span>m</span>&#65289;&#65292; &#34987;&#25552;&#20379;&#20316;&#20026;&#32534;&#20889;&#26041;&#27861;&#21512;&#32422;&#30340;&#36895;&#35760;&#12290;</p><p>&#22312; <span class="RktSym">absent</span> &#23376;&#21477;&#20013;&#21015;&#20986;&#30340;&#26041;&#27861;&#21644;&#23383;&#27573;&#24517;&#39035; <span style="font-weight: bold">&#19981;</span> &#23384;&#22312;&#20110;&#31867;&#20013;&#12290;</p><p>&#26681;&#25454;&#20197;&#19978;&#25551;&#36848;&#30340;&#26041;&#27861;&#65292;&#20026;<span class="RktSym">puzzle-canvas%</span>&#21152;&#19978;&#21512;&#32422;&#65306;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;&#25340;&#22270;&#30011;&#24067;&#31867;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">define/contract</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">puzzle-canvas%</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;puzzle-canvas%&#31867;&#30340;&#21512;&#32422;&#65306;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class/c</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">inherit</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">get-dc</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span>m</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">is-a?/c</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dc&lt;%&gt;</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">get-x</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span>m</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">real?</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">get-y</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span>m</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">real?</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">override</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">on-event</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span>m</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">is-a?/c</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">mouse-event%</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">void?</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">canvas%</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">inherit</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">get-dc</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">get-x</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">get-y</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">super-new</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;&#31867;&#25104;&#21592;&#20989;&#25968;&#65292;&#27492;&#22788;&#30465;&#30053;&#12290;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>&#26500;&#36896;&#22909;&#20102;&#21512;&#32422;&#65292;&#30452;&#25509;&#29992;<span class="RktPn">(</span><span class="RktSym">provide</span><span class="stt"> </span><span class="RktSym">puzzle-canvas%</span><span class="RktPn">)</span>&#35774;&#32622;&#25552;&#20379;&#23601;&#21487;&#20197;&#20102;&#12290;&#24403;&#28982;&#65292;&#19981;&#26500;&#36896;&#21512;&#32422;&#20063;&#26159;&#21487;&#20197;&#36825;&#26679;&#35774;&#32622;&#25552;&#20379;&#30340;&#65292;&#21482;&#26159;&#32473;&#31867;&#25552;&#20379;&#19968;&#20010;&#20445;&#25252;&#26356;&#22909;&#12290;</p><p>&#33267;&#27492;&#65292;&#25340;&#22270;&#28216;&#25103;&#32534;&#20889;&#23436;&#25104;&#65292;&#24076;&#26395;&#23545;&#22823;&#23478;&#26377;&#25152;&#24110;&#21161;&#12290;&#20195;&#30721;&#24456;&#22810;&#22320;&#26041;&#36824;&#26377;&#21487;&#20248;&#21270;&#30340;&#22320;&#26041;&#65292;&#22823;&#23478;&#21487;&#20197;&#35780;&#35770;&#30041;&#35328;&#35752;&#35770;&#12290;</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="controler_main-frame-controler.html" title="backward to &quot;29 主框架视图控制器&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;用Racket做一个拼图游戏&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="puzzle-main.html" title="forward to &quot;31 创建主程序&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>